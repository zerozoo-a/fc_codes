{"version":3,"file":"tap.js","sourceRoot":"","sources":["../../src/tap.ts"],"names":[],"mappings":";;AACA,2CAA8C;AAyB9C,SAAS,GAAG,CACV,CAAyB,EACzB,CAAK;IAKL,IAAI,CAAC,KAAK,SAAS,EAAE;QACnB,OAAO,UAAC,CAAI,IAAK,OAAA,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAT,CAAS,CAAC;KAC5B;IAED,IAAM,GAAG,GAAG,IAAA,iBAAS,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAQ,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAAe,CAAS,CAAC;IAC1E,IAAI,IAAA,iBAAS,EAAC,GAAG,CAAC,EAAE;QAClB,OAAO,GAAG,CAAC,IAAI,CAAC,cAAM,OAAA,CAAC,EAAD,CAAC,CAAC,CAAC;KAC1B;IAED,OAAO,CAAC,CAAC;AACX,CAAC;AAED,kBAAe,GAAG,CAAC","sourcesContent":["import Awaited from \"./types/Awaited\";\nimport { isPromise } from \"./_internal/utils\";\n/**\n * This method invokes interceptor and returns a value.\n * The interceptor is invoked with one argument.\n *\n * @example\n * ```ts\n * tap(console.log, [1,2,3,4,5])\n * // log [1, 2, 3, 4, 5]\n * // return [1, 2, 3, 4, 5]\n *\n * tap(async (a) => console.log(a), [1,2,3,4,5]);\n * // log [1, 2, 3, 4, 5]\n * // return Promise<[1, 2, 3, 4, 5]>\n * ```\n */\nfunction tap<T, U>(\n  f: (arg: Awaited<T>) => U,\n  v: T,\n): U extends Promise<any> ? Promise<Awaited<T>> : T;\n\nfunction tap<T, U>(\n  f: (arg: Awaited<T>) => U,\n): (v: T) => U extends Promise<any> ? Promise<Awaited<T>> : T;\n\nfunction tap<T, U>(\n  f: (arg: Awaited<T>) => U,\n  v?: T,\n):\n  | T\n  | Promise<T>\n  | ((v: T) => U extends Promise<any> ? Promise<Awaited<T>> : T) {\n  if (v === undefined) {\n    return (v: T) => tap(f, v);\n  }\n\n  const res = isPromise(v) ? v.then(f as any) : (f(v as Awaited<T>) as any);\n  if (isPromise(res)) {\n    return res.then(() => v);\n  }\n\n  return v;\n}\n\nexport default tap;\n"]}