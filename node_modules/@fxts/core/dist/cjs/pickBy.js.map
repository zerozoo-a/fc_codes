{"version":3,"file":"pickBy.js","sourceRoot":"","sources":["../../src/pickBy.ts"],"names":[],"mappings":";;;AAKA,8DAAgC;AAChC,iEAAmC;AACnC,mEAAqC;AACrC,2DAA6B;AAC7B,2DAA6B;AAC7B,wDAA0B;AAC1B,2CAA8C;AAuD9C,SAAS,MAAM,CACb,CAAI,EACJ,GAAO;IAOP,IAAI,GAAG,KAAK,SAAS,EAAE;QACrB,OAAO,UAAC,GAAM,IAAK,OAAA,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,EAAd,CAAc,CAAC;KACnC;IAED,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACpC,IAAM,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,UAAC,KAAK,IAAK,OAAA,CAAC,CAAC,KAAY,CAAC,EAAf,CAAe,CAAC,CAAC;IAC3D,IAAM,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,UAAC,CAAC,IAAK,OAAA,IAAA,iBAAS,EAAC,CAAC,CAAC,EAAZ,CAAY,CAAC,CAAC;IAErD,IAAI,OAAO,EAAE;QACX,OAAO,IAAA,cAAI,EACT,OAAO,EACP,IAAA,aAAG,EAAC,IAAA,iBAAO,EAAC,UAAU,CAAC,CAAC,EACxB,IAAA,gBAAM,EAAC,UAAC,EAAM;gBAAN,KAAA,qBAAM,EAAL,IAAI,QAAA;YAAM,OAAA,IAAI;QAAJ,CAAI,CAAC,EACxB,IAAA,aAAG,EAAC,UAAC,EAAS;gBAAT,KAAA,qBAAS,EAAN,KAAK,QAAA;YAAM,OAAA,KAAK;QAAL,CAAK,CAAC,EACzB,iBAAO,EACP,MAAM,CAAC,WAAW,CACI,CAAC;KAC1B;SAAM;QACL,OAAO,IAAA,cAAI,EACT,OAAO,EACP,IAAA,aAAG,EAAC,UAAU,CAAC,EACf,IAAA,gBAAM,EAAC,UAAC,EAAM;gBAAN,KAAA,qBAAM,EAAL,IAAI,QAAA;YAAM,OAAA,IAAI;QAAJ,CAAI,CAAC,EACxB,IAAA,aAAG,EAAC,UAAC,EAAS;gBAAT,KAAA,qBAAS,EAAN,KAAK,QAAA;YAAM,OAAA,KAAK;QAAL,CAAK,CAAC,EACzB,MAAM,CAAC,WAAW,CACL,CAAC;KACjB;AACH,CAAC;AAED,kBAAe,MAAM,CAAC","sourcesContent":["import {\n  AsyncEntryPredicate,\n  ConditionalAsyncEntryPredicate,\n  EntryPredicate,\n} from \"./types/EntryPredicate\";\nimport toArray from \"./toArray\";\nimport filter from \"./Lazy/filter\";\nimport toAsync from \"./Lazy/toAsync\";\nimport map from \"./Lazy/map\";\nimport zip from \"./Lazy/zip\";\nimport pipe from \"./pipe\";\nimport { isPromise } from \"./_internal/utils\";\n\n/**\n *\n * Returns a partial copy of an object which contains only the keys that satisfy the supplied predicate.\n *\n * @example\n * ```ts\n * const obj = { a: 1, b: \"2\", c: true };\n * pickBy(([key, value]) => key === \"a\" || value === true, obj); // { a: 1, c: true }\n *\n * // asynchronous predicate\n * await pickBy(async ([key, value]) => key === \"a\" || value === true, obj); // { a: 1, c: true }\n *\n * // Using with the `pipe` function\n * pipe(\n *   obj,\n *   pickBy(([key, value]) => key === \"a\" || value === true)\n * );\n *\n * await pipe(\n *   obj,\n *   pickBy(async ([key, value]) => key === \"a\" || value === true)\n * );\n * ```\n * see {@link https://fxts.dev/docs/pipe | pipe}, {@link https://fxts.dev/docs/pick | pick},\n */\n\nfunction pickBy<T extends object, F extends AsyncEntryPredicate<T>>(\n  f: F,\n  obj: T,\n): Promise<Partial<T>>;\n\nfunction pickBy<T extends object, F extends AsyncEntryPredicate<T>>(\n  f: F,\n): (obj: T) => Promise<Partial<T>>;\n\nfunction pickBy<T extends object, F extends EntryPredicate<T>>(\n  f: F,\n  obj: T,\n): Partial<T>;\n\nfunction pickBy<T extends object, F extends EntryPredicate<T>>(\n  f: F,\n): (obj: T) => Partial<T>;\n\nfunction pickBy<T extends object, F extends ConditionalAsyncEntryPredicate<T>>(\n  f: F,\n  obj: T,\n): Partial<T> | Promise<Partial<T>>;\n\nfunction pickBy<T extends object, F extends ConditionalAsyncEntryPredicate<T>>(\n  f: F,\n): (obj: T) => Partial<T> | Promise<Partial<T>>;\n\nfunction pickBy<T extends object, F extends ConditionalAsyncEntryPredicate<T>>(\n  f: F,\n  obj?: T,\n):\n  | Partial<T>\n  | Promise<Partial<T>>\n  | ((obj: T) => Partial<T>)\n  | ((obj: T) => Promise<Partial<T>>)\n  | ((obj: T) => Partial<T> | Promise<Partial<T>>) {\n  if (obj === undefined) {\n    return (obj: T) => pickBy(f, obj);\n  }\n\n  const entries = Object.entries(obj);\n  const conditions = entries.map((entry) => f(entry as any));\n  const isAsync = conditions.some((c) => isPromise(c));\n\n  if (isAsync) {\n    return pipe(\n      entries,\n      zip(toAsync(conditions)),\n      filter(([cond]) => cond),\n      map(([, entry]) => entry),\n      toArray,\n      Object.fromEntries,\n    ) as Promise<Partial<T>>;\n  } else {\n    return pipe(\n      entries,\n      zip(conditions),\n      filter(([cond]) => cond),\n      map(([, entry]) => entry),\n      Object.fromEntries,\n    ) as Partial<T>;\n  }\n}\n\nexport default pickBy;\n"]}