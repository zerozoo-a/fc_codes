{"version":3,"file":"omit.js","sourceRoot":"","sources":["../../src/omit.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,eAAe,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAChE,OAAO,OAAO,MAAM,WAAW,CAAC;AAEhC,SAAS,KAAK,CAAI,GAAM,EAAE,IAAkB;IAC1C,OAAO,MAAM,CAAC,WAAW,CACvB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,UAAC,EAAG;YAAH,KAAA,aAAG,EAAF,CAAC,QAAA;QAAM,OAAA,CAAC,IAAI,CAAC,GAAG,CAAC,CAAY,CAAC;IAAvB,CAAuB,CAAC,CAC7D,CAAC;AACJ,CAAC;AAED,SAAS,IAAI,CACX,QAAW,EACX,GAAM;IAEN,IAAM,IAAI,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC/B,OAAO,KAAK,CAAC,GAAG,EAAE,IAAI,CAA8B,CAAC;AACvD,CAAC;AAED,SAAe,KAAK,CAClB,QAAW,EACX,GAAM;;;;;;yBAEW,GAAG;oBAAC,qBAAM,OAAO,CAAC,QAAQ,CAAC,EAAA;;oBAAtC,IAAI,GAAG,cAAI,GAAG,WAAC,SAAuB,KAAC;oBAC7C,sBAAO,KAAK,CAAC,GAAG,EAAE,IAAI,CAA8B,EAAC;;;;CACtD;AAoDD,SAAS,IAAI,CAIX,QAAW,EACX,GAAO;IAOP,IAAI,GAAG,KAAK,SAAS,EAAE;QACrB,OAAO,UAAC,GAAM,IAAK,OAAA,IAAI,CAAC,QAAe,EAAE,GAAG,CAAQ,EAAjC,CAAiC,CAAC;KACtD;IACD,IAAI,UAAU,CAAC,QAAQ,CAAC,EAAE;QACxB,OAAO,IAAI,CAAC,QAAQ,EAAE,GAAG,CAA8B,CAAC;KACzD;SAAM,IAAI,eAAe,CAAC,QAAQ,CAAC,EAAE;QACpC,OAAO,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAuC,CAAC;KACnE;IACD,MAAM,IAAI,SAAS,CAAC,sDAAsD,CAAC,CAAC;AAC9E,CAAC;AAED,eAAe,IAAI,CAAC","sourcesContent":["import IterableInfer from \"./types/IterableInfer\";\nimport { isAsyncIterable, isIterable } from \"./_internal/utils\";\nimport toArray from \"./toArray\";\n\nfunction inner<T>(obj: T, keys: Set<keyof T>) {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([k]) => !keys.has(k as keyof T)),\n  );\n}\n\nfunction sync<T extends object, U extends Iterable<keyof T>>(\n  iterable: U,\n  obj: T,\n): Omit<T, IterableInfer<U>> {\n  const keys = new Set(iterable);\n  return inner(obj, keys) as Omit<T, IterableInfer<U>>;\n}\n\nasync function async<T extends object, U extends AsyncIterable<keyof T>>(\n  iterable: U,\n  obj: T,\n): Promise<Omit<T, IterableInfer<U>>> {\n  const keys = new Set(await toArray(iterable));\n  return inner(obj, keys) as Omit<T, IterableInfer<U>>;\n}\n\n/**\n * Returns a partial copy of an object omitting the keys specified.\n *\n * @example\n * ```ts\n * const person = {\n *   name: \"james\",\n *   age: 40,\n *   numberOfKids: 2,\n *   team: \"Software Development\",\n *   preferredLanguage: \"Rust\",\n * };\n *\n * const dad = omit([\"team\", \"preferredLanguage\"], person);\n * // { name: \"james\", age: 40, numberOfKids: 2 }\n *\n * const developer = omit([\"age\", \"numberOfKids\"], person);\n * // { name: \"james\", team: \"Software Development\", preferredLanguage: \"Rust\" }\n *\n * // with pipe\n * pipe(\n *  person,\n *  omit([\"team\", \"preferredLanguage\"]),\n * );\n *\n * // if you want to use AsyncIterable as the list of property names\n * const anonymous = await omit(toAsync([\"name\"] as const), person);\n * ```\n * see {@link https://fxts.dev/docs/pipe | pipe}, {@link https://fxts.dev/docs/toAsync | toAsync},\n * {@link https://fxts.dev/docs/pick | pick},\n */\n\nfunction omit<T extends object, U extends Iterable<keyof T>>(\n  iterable: U,\n  obj: T,\n): Omit<T, IterableInfer<U>>;\n\nfunction omit<T extends object, U extends AsyncIterable<keyof T>>(\n  iterable: U,\n  obj: T,\n): Promise<Omit<T, IterableInfer<U>>>;\n\nfunction omit<T extends object, U extends Iterable<keyof T>>(\n  iterable: U,\n): (obj: T) => Omit<T, IterableInfer<U>>;\n\nfunction omit<T extends object, U extends AsyncIterable<keyof T>>(\n  iterable: U,\n): (obj: T) => Promise<Omit<T, IterableInfer<U>>>;\n\nfunction omit<\n  T extends object,\n  U extends AsyncIterable<keyof T> | Iterable<keyof T>,\n>(\n  iterable: U,\n  obj?: T,\n):\n  | Promise<Omit<T, IterableInfer<U>>>\n  | Omit<T, IterableInfer<U>>\n  | ((\n      obj: T,\n    ) => Promise<Omit<T, IterableInfer<U>>> | Omit<T, IterableInfer<U>>) {\n  if (obj === undefined) {\n    return (obj: T) => omit(iterable as any, obj) as any;\n  }\n  if (isIterable(iterable)) {\n    return sync(iterable, obj) as Omit<T, IterableInfer<U>>;\n  } else if (isAsyncIterable(iterable)) {\n    return async(iterable, obj) as Promise<Omit<T, IterableInfer<U>>>;\n  }\n  throw new TypeError(\"'iterable' must be type of Iterable or AsyncIterable\");\n}\n\nexport default omit;\n"]}