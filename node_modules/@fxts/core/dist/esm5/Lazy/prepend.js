import { __awaiter, __generator, __values } from "tslib.js";
import { isAsyncIterable, isIterable, isPromise } from "../_internal/utils.js";
function sync(a, iterable) {
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0: return [4 /*yield*/, a];
            case 1:
                _a.sent();
                return [5 /*yield**/, __values(iterable)];
            case 2:
                _a.sent();
                return [2 /*return*/];
        }
    });
}
function async(a, iterable) {
    var _a;
    var isFirstItem = true;
    var iterator = iterable[Symbol.asyncIterator]();
    return _a = {},
        _a[Symbol.asyncIterator] = function () {
            return this;
        },
        _a.next = function (concurrent) {
            return __awaiter(this, void 0, void 0, function () {
                var _a;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!isFirstItem) return [3 /*break*/, 2];
                            isFirstItem = false;
                            _a = { done: false };
                            return [4 /*yield*/, a];
                        case 1: return [2 /*return*/, (_a.value = _b.sent(), _a)];
                        case 2: return [2 /*return*/, iterator.next(concurrent)];
                    }
                });
            });
        },
        _a;
}
function prepend(a, iterable) {
    if (iterable === undefined) {
        return function (iterable) {
            return prepend(a, iterable);
        };
    }
    if (isAsyncIterable(iterable)) {
        return async(isPromise(a) ? a : Promise.resolve(a), iterable);
    }
    if (isIterable(iterable)) {
        return sync(a, iterable);
    }
    throw new TypeError("'iterable' must be type of Iterable or AsyncIterable");
}
export default prepend;
//# sourceMappingURL=prepend.js.map